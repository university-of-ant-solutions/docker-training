upstream myapp {
  server server:4000;
}

server {
  # root /tmp/nginx-installation/nginx-1.9.7;
  # Sets configuration for a virtual server.
  resolver 8.8.8.8 8.8.4.4;
  
  listen         80 default_server; # Sets the address and port for IP
  listen    [::]:80  default_server ipv6only=on; # Sets names of a virtual server
  
  include boilerplate/enable/gzip.conf;

  # Sets configuration depending on a request URI.

  more_set_headers 'Server: ant-solution-fw';

  location / {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $host;

    # enable WS support
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_http_version 1.1;

    proxy_pass http://myapp;
  }
  include  boilerplate/locations/static.conf;
}
